!function(){"use strict";function r(){var a=p.getSession().getScreenLength()*p.renderer.lineHeight+p.renderer.scrollBar.getWidth();c.style.height=Math.ceil(a).toString()+"px",p.resize()}function s(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(a,"<br />")}function t(a,b){var c=new XMLHttpRequest,d=JSON.stringify({version:"master",optimize:"2",code:a});c.open("POST","http://play.rust-lang.org/evaluate.json",!0),c.onload=function(){if(4===c.readyState&&200===c.status){var d=JSON.parse(c.response).result,e=m;-1!==d.indexOf("error:")?e=n:-1!==d.indexOf("warning:")&&(e=o),b(e,d)}else b(!1,null)},c.onerror=function(){b(!1,null)},c.setRequestHeader("Content-Type","application/json"),c.send(d)}function u(a,b){null==result?(f.style.backgroundColor=i,f.innerHTML=k):a===m?v(b):a===o?w(b):x(b)}function v(a){f.style.backgroundColor=h,encodeURIComponent(p.getValue()),f.innerHTML="",f.appendChild(g),f.innerHTML+=s(a)}function w(a){f.style.backgroundColor=j,y(a,"warning")}function x(a){f.style.backgroundColor=i,y(a,"error")}function y(b,c){var d=b.split(a),e=d.map(function(a){if(a.startsWith("<anon>")||-1!==a.indexOf("^")){var b=a.indexOf(c+": ");return-1!==b?a.slice(b):""}return a.startsWith("playpen:")?"":a}).filter(function(a){return""!==a}).map(function(a){return s(a)}).join("<br />");encodeURIComponent(p.getValue()),f.innerHTML="",f.appendChild(g),f.innerHTML+=e;var i=z(d);l=i.map(function(a){return p.getSession().addMarker(a,"ace-"+c+"-line","fullLine",!1)}),l=l.concat(i.map(function(a){return p.getSession().addMarker(a,"ace-"+c+"-text","text",!1)}))}function z(a){var b=[];for(var c in a){var d=a[c];if(d.startsWith("<anon>:")&&-1!==d.indexOf(": ")){var e=d.split(/:\s?|\s+/,5).slice(1,5),f=e.map(function(a){return parseInt(a,10)-1});b.push(new q(f[0],f[1],f[2],f[3]))}}return b}"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.slice(0,a.length)===a});var a=/(?:\r\n|\r|\n)/g,b=document.getElementById("active-code"),c=document.getElementById("editor"),d=document.getElementById("static-code"),e=document.getElementById("run-code"),f=document.getElementById("result"),g=document.getElementById("playlink"),h="#E2EEF6",i="#F6E2E2",j="#FFFBCB",k="The server encountered an error while running the program.",l=[],m=0,n=1,o=2;d.style.display="none",b.style.display="block";var p=ace.edit("editor"),q=ace.require("ace/range").Range;p.setTheme("ace/theme/chrome"),p.getSession().setMode("ace/mode/rust"),p.setShowPrintMargin(!1),p.renderer.setShowGutter(!1),p.setHighlightActiveLine(!1),r(),e.addEventListener("click",function(){f.style.display="block",f.innerHTML="Running...",l.map(function(a){p.getSession().removeMarker(a)});var b=p.getValue();t(b,u)}),p.on("focus",function(){p.setHighlightActiveLine(!0)}),p.on("blur",function(){p.setHighlightActiveLine(!1)})}();
